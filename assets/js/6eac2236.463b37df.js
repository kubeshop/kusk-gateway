"use strict";(self.webpackChunkkusk_gateway_docs_2=self.webpackChunkkusk_gateway_docs_2||[]).push([[363],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),f=o,m=d["".concat(c,".").concat(f)]||d[f]||p[f]||i;return n?r.createElement(m,a(a({ref:t},u),{},{components:n})):r.createElement(m,a({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var l=2;l<i;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6614:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const i={},a="Observability",s={unversionedId:"guides/observability",id:"guides/observability",title:"Observability",description:"Envoy Admin Interface",source:"@site/docs/guides/observability.md",sourceDirName:"guides",slug:"/guides/observability",permalink:"/guides/observability",draft:!1,editUrl:"https://github.com/kubeshop/kusk-gateway/docs/guides/observability.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Troubleshooting",permalink:"/guides/troubleshooting"},next:{title:"Install Kusk CLI",permalink:"/reference/cli/overview"}},c={},l=[{value:"<strong>Envoy Admin Interface</strong>",id:"envoy-admin-interface",level:2},{value:"<strong>Metrics</strong>",id:"metrics",level:2}],u={toc:l};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"observability"},"Observability"),(0,o.kt)("h2",{id:"envoy-admin-interface"},(0,o.kt)("strong",{parentName:"h2"},"Envoy Admin Interface")),(0,o.kt)("p",null,"Envoy's admin interface is opened on post ",(0,o.kt)("inlineCode",{parentName:"p"},"19000")," and could be used for troubleshooting, configuration dumps, changing logs levels and other administrative tasks."),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"/guides/troubleshooting"},"Troubleshooting")," on the usage."),(0,o.kt)("h2",{id:"metrics"},(0,o.kt)("strong",{parentName:"h2"},"Metrics")),(0,o.kt)("p",null,"Envoy exposes a Stats service on the admin interface.\nCurrently, we don't configure any stats sinks to publish the metrics, but Prometheus can discover\nEnvoy pods and query them for the metrics, if pods have the following annotations:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"annotations:\n  prometheus.io/scrape: 'true'\n  prometheus.io/port: '19000'\n  prometheus.io/path: /stats/prometheus\n")),(0,o.kt)("p",null,"This can be configured with ",(0,o.kt)("a",{parentName:"p",href:"/reference/customresources/envoyfleet"},"EnvoyFleet Custom resource")," ",(0,o.kt)("inlineCode",{parentName:"p"},"spec.annotations")," field."),(0,o.kt)("p",null,"The list of exported HTTP metrics is described in ",(0,o.kt)("a",{parentName:"p",href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/stats"},"HTTP Connection Manager Statistics"),". See also\n",(0,o.kt)("a",{parentName:"p",href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/stats"},"Listener Metrics"),"."))}p.isMDXComponent=!0}}]);