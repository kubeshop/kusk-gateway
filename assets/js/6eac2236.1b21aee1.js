"use strict";(self.webpackChunkkusk_gateway_docs_2=self.webpackChunkkusk_gateway_docs_2||[]).push([[363],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>y});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(r),y=o,f=d["".concat(c,".").concat(y)]||d[y]||p[y]||a;return r?n.createElement(f,i(i({ref:t},u),{},{components:r})):n.createElement(f,i({ref:t},u))}));function y(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6614:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=r(7462),o=(r(7294),r(3905));const a={},i="Observability",s={unversionedId:"guides/observability",id:"guides/observability",title:"Observability",description:"Envoy Admin Interface",source:"@site/docs/guides/observability.md",sourceDirName:"guides",slug:"/guides/observability",permalink:"/kusk-gateway/docs/guides/observability",draft:!1,editUrl:"https://github.com/kubeshop/kusk-gateway/docs/guides/observability.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Troubleshooting",permalink:"/kusk-gateway/docs/guides/troubleshooting"},next:{title:"Kusk CLI",permalink:"/kusk-gateway/docs/cli/overview"}},c={},l=[{value:"<strong>Envoy Admin Interface</strong>",id:"envoy-admin-interface",level:2},{value:"<strong>Metrics</strong>",id:"metrics",level:2}],u={toc:l};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"observability"},"Observability"),(0,o.kt)("h2",{id:"envoy-admin-interface"},(0,o.kt)("strong",{parentName:"h2"},"Envoy Admin Interface")),(0,o.kt)("p",null,"Envoy's admin interface is opened on 19000 port and could be used for troubleshooting, configuration dumps, changing logs levels and other administrative tasks."),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"/kusk-gateway/docs/guides/troubleshooting"},"Troubleshooting")," on the usage."),(0,o.kt)("h2",{id:"metrics"},(0,o.kt)("strong",{parentName:"h2"},"Metrics")),(0,o.kt)("p",null,"Envoy exposes a Stats service on the admin interface.\nCurrently, we don't configure any stats sinks to publish the metrics, but Prometheus can discover\nEnvoy pods and query them for the metrics, if pods have the following annotations:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"annotations:\n  prometheus.io/scrape: 'true'\n  prometheus.io/port: '19000'\n  prometheus.io/path: /stats/prometheus\n")),(0,o.kt)("p",null,"This can be configured with ",(0,o.kt)("a",{parentName:"p",href:"/kusk-gateway/docs/reference/customresources/envoyfleet"},"EnvoyFleet Custom resource")," spec.annotations field."),(0,o.kt)("p",null,"The list of exported HTTP metrics is described in ",(0,o.kt)("a",{parentName:"p",href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/stats"},"HTTP Connection Manager Statistics"),". See also\n",(0,o.kt)("a",{parentName:"p",href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/stats"},"Listener Metrics"),"."))}p.isMDXComponent=!0}}]);